\subsection{ESKF}
The human brain is brilliant filter fusing multiple senses together to create what we percieve. We rely on multiple senses to be able to know if we are falling or to know where we are. 
Robots have the same need when navigating and we do not have any single perfect sensor that can fully provide us with the robots pose at any time. We therefore want to create a filter to fuse multiple sources of data together to create an estimate for our robot, similar to how our brain create our perception.

We will therefore develop the \texttt{error state kalman filter} (ESKF) to estimate the location and orientation of an aeroplane using intertial navigation. The plane use an \texttt{intertial measurement unit} (IMU) to sense acceleration and rotation rate using accelerometer and gyroscope. Similar to a human with his/her eyes closed, the filter is able to predict pose using only the IMU if the prior state is known, but with an increasing error (and corresponding uncertianty). We will therefore also use a GNSS receiver to update our estimate when we receive new measurements. 

A normal EKF, which might be tempting to use, struggles with representing the error state covariance due to the nonlinearity which occurs when working with orientation. We therefore use our measurements to estimate the error state rather than the nominal states. We then use our model to simulate the nominal state using numerical integration methods. After measurement updates we get estimates for the error between our simulation and the real state. Further we can inject the error estimate into our nomial state predictions and correct for any model or simulation errors. After the injection step we can reset the error state back to zero and avoid having to propogate the error. By doing this we avoid having to find a relationship between the error state covariance and the nominal state covariance (not trivial when working with attitude), since we can get the covariance directly from the ESKF. 

We also consider the IMU measurement as control input to our model and not as measurements. Measurements would require us to include the acceleration and orientation rates as part of the state vector, and we do not have any good model for these. The computational complexity would also increase due to the high rate of IMU measurements.